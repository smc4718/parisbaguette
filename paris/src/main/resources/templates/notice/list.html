<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" th:href="@{/assets/css/main.css}" />
	<noscript><link rel="stylesheet" th:href="@{/assets/css/noscript.css}" /></noscript>
	<title>파리바게뜨 망우겸재 커뮤니티</title>
</head>

<style>
	.button-location {
 		margin-left: 850px;
	}

</style>

<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper" class="fade-in">

	<!-- Intro -->
	<div id="intro">
		<h1>파리바게뜨 망우겸재</h1>
		<p>망우겸재와 함께하는 행복한 하루 되세요~
			<a href="https://map.naver.com/p/entry/place/19501449?lng=127.0976717&lat=37.5906108&placePath=%2Fhome&entry=plt&searchType=place&c=15.00,0,0,0,dh">
				<br>망우겸재점에 대해...</a>
		</p>
		<ul class="actions">
			<li><a href="#header" class="button icon solid solo fa-arrow-down scrolly">Continue</a></li>
		</ul>
	</div>

	<!-- Header -->
	<header id="header">
		<a th:href="@{/main}" class="logo">Paris Baguette</a>
	</header>

	<!-- Nav -->
	<nav id="nav">
		<ul class="links">
			<li class="active"><a th:href="@{/notice/list}">오늘의 공지</a></li>
			<li><a th:href="@{/event/list}">매장 이벤트</a></li>
			<li><a th:href="@{/notice/list}">휴일 예약</a></li>
		</ul>
		<ul class="icons">
			<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
			<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
			<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
			<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
		</ul>
	</nav>

	<!-- Main -->
	<div id="main">
		<!-- 공지사항 목록 -->
		<h2>당일 근무자 필독!</h2>

		<!-- 글쓰기 버튼 -->
		<ul class="actions">
			<li><a th:href="@{/notice/write.form}" class="button button-location">글쓰기</a></li>
		</ul>
		<table border="1">
			<thead>
				<tr>
					<th>번호</th>
					<th>제목</th>
					<th>조회수</th>
					<th>작성일</th>
				</tr>
			</thead>
			<tbody>
				<!-- getNoticeList Ajax 로드 -->
			</tbody>
		</table>

		<footer>
			<div class="pagination" id="pagination"></div>
		</footer>

	</div>

	<!-- Footer -->
	<footer id="footer">
		<section>
			<h3>Social</h3>
			<ul class="icons alt">
				<li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
				<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
				<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
				<li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
			</ul>
		</section>
	</footer>

	<!-- Copyright -->
	<div id="copyright">
		<ul>
			<li>&copy; PYJ</li>
			<li><a th:href="@{/main}">Park family</a></li>
		</ul>
	</div>

</div>

<!-- Scripts -->
<script th:src="@{/assets/js/jquery.min.js}"></script>
<script th:src="@{/assets/js/jquery.scrollex.min.js}"></script>
<script th:src="@{/assets/js/jquery.scrolly.min.js}"></script>
<script th:src="@{/assets/js/browser.min.js}"></script>
<script th:src="@{/assets/js/breakpoints.min.js}"></script>
<script th:src="@{/assets/js/util.js}"></script>
<script th:src="@{/assets/js/main.js}"></script>

<script>
	$(document).ready(function() {
		// 첫 페이지 로딩 시
		loadNoticeList(1);

		// 페이지 클릭 시
		$(document).on('click', '.pagination-link', function(e) {
			e.preventDefault();
			var page = $(this).data('page');
			loadNoticeList(page);
		});

		function loadNoticeList(page) {
			$.ajax({
				url: '/notice/getList.do',
				type: 'GET',
				data: { page: page },
				dataType: 'json',
				success: function(data) {
					var str = '';
					$.each(data.noticeList, function (index, notice) {
						str += '<tr>';
						str += '<td>' + notice.noticeNo + '</td>';
						str += '<td><a href="/notice/detail.do?noticeNo=' + notice.noticeNo + '">' + notice.title + '</a></td>';
						str += '<td>' + notice.hit + '</td>';
						str += '<td>' + notice.createdAt + '</td>';
						str += '</tr>';
					});

					$('table tbody').html(str);

					var paginationHtml = '';

					// [이전] 버튼
					if (page > 1) {
						paginationHtml += '<a href="#" class="pagination-link" data-page="' + (page - 1) + '">이전</a>';
					}

					for (var i = 1; i <= data.totalPage; i++) {
						if (i === page) {
							paginationHtml += '<a href="#" class="pagination-link active" data-page="' + i + '"><strong>' + i + '</strong></a>';
						} else {
							paginationHtml += '<a href="#" class="pagination-link" data-page="' + i + '">' + i + '</a>';
						}
					}

					// [다음] 버튼
					if (page < data.totalPage) {
						paginationHtml += '<a href="#" class="pagination-link" data-page="' + (page + 1) + '">다음</a>';
					}

					$('#pagination').html(paginationHtml);
				},
				error: function (xhr, status, error) {
					console.error("페이징 처리 오류: " + error);
				}
			});
		}
	});
</script>

</body>
</html>
